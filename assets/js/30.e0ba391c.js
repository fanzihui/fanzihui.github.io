(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{486:function(t,s,a){"use strict";a.r(s);var n=a(2),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"springboot-定时器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#springboot-定时器"}},[t._v("#")]),t._v(" SpringBoot 定时器")]),t._v(" "),a("h2",{attrs:{id:"_1-设置-定时器-config-配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-设置-定时器-config-配置"}},[t._v("#")]),t._v(" 1. 设置 定时器 Config 配置")]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * 定时任务配置\n * \n */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EnableScheduling")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SpringTaskConfig")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("h2",{attrs:{id:"_2-使用定时器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-使用定时器"}},[t._v("#")]),t._v(" 2. 使用定时器")]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TimeOutCancelTask")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Logger")]),t._v(" LOGGER "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LoggerFactory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLogger")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TimeOutCancelTask")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * cron表达式：Seconds Minutes Hours DayofMonth Month DayofWeek [Year]\n     * 每10分钟扫描一次，扫描设定超时时间之前下的订单，如果没支付则取消该订单\n     */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Scheduled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cron "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0 0/10 * ? * ?"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cancelTimeOutOrder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        LOGGER"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"定时器的一些操作"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br")])]),a("h2",{attrs:{id:"_3-其他"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-其他"}},[t._v("#")]),t._v(" 3. 其他")]),t._v(" "),a("p",[t._v("想要使用定时器必须要了解 Cron")]),t._v(" "),a("h4",{attrs:{id:"cron格式中每个时间元素的说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cron格式中每个时间元素的说明"}},[t._v("#")]),t._v(" Cron格式中每个时间元素的说明")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("时间元素")]),t._v(" "),a("th",[t._v("可出现字符")]),t._v(" "),a("th",[t._v("数值范围")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("Seconds")]),t._v(" "),a("td",[t._v(", - * /")]),t._v(" "),a("td",[t._v("0-59")])]),t._v(" "),a("tr",[a("td",[t._v("Minutes")]),t._v(" "),a("td",[t._v(", - * /")]),t._v(" "),a("td",[t._v("0-59")])]),t._v(" "),a("tr",[a("td",[t._v("Hours")]),t._v(" "),a("td",[t._v(", - * /")]),t._v(" "),a("td",[t._v("0-23")])]),t._v(" "),a("tr",[a("td",[t._v("DayofMonth")]),t._v(" "),a("td",[t._v(", - * / ? L W")]),t._v(" "),a("td",[t._v("0-31")])]),t._v(" "),a("tr",[a("td",[t._v("Month")]),t._v(" "),a("td",[t._v(", - * /")]),t._v(" "),a("td",[t._v("1-12")])]),t._v(" "),a("tr",[a("td",[t._v("DayofWeek")]),t._v(" "),a("td",[t._v(", - * / ? L #")]),t._v(" "),a("td",[t._v("1-7或SUN-SAT")])])])]),t._v(" "),a("h4",{attrs:{id:"cron格式中特殊字符说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cron格式中特殊字符说明"}},[t._v("#")]),t._v(" Cron格式中特殊字符说明")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("字符")]),t._v(" "),a("th",[t._v("作用")]),t._v(" "),a("th",[t._v("举例")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v(",")]),t._v(" "),a("td",[t._v("列出枚举值")]),t._v(" "),a("td",[t._v("在Minutes域使用5,10，表示在5分和10分各触发一次")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),a("td",[t._v("表示触发范围")]),t._v(" "),a("td",[t._v("在Minutes域使用5-10，表示从5分到10分钟每分钟触发一次")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("*")]),t._v(" "),a("td",[t._v("匹配任意值")]),t._v(" "),a("td",[t._v("在Minutes域使用*, 表示每分钟都会触发一次")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("/")]),t._v(" "),a("td",[t._v("起始时间开始触发，每隔固定时间触发一次")]),t._v(" "),a("td",[t._v("在Minutes域使用5/10,表示5分时触发一次，每10分钟再触发一次")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("?")]),t._v(" "),a("td",[t._v("在DayofMonth和DayofWeek中，用于匹配任意值")]),t._v(" "),a("td",[t._v("在DayofMonth域使用?,表示每天都触发一次")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("#")]),t._v(" "),a("td",[t._v("在DayofMonth中，确定第几个星期几")]),t._v(" "),a("td",[t._v("1#3表示第三个星期日")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("L")]),t._v(" "),a("td",[t._v("表示最后")]),t._v(" "),a("td",[t._v("在DayofWeek中使用5L,表示在最后一个星期四触发")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("W")]),t._v(" "),a("td",[t._v("表示有效工作日(周一到周五)")]),t._v(" "),a("td",[t._v("在DayofMonth使用5W，如果5日是星期六，则将在最近的工作日4日触发一次")])])])])])}),[],!1,null,null,null);s.default=e.exports}}]);